# ğŸš€ Voice Assistant è¿è¡ŒæŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨ iOS å’Œ Android æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ Voice Assistant åº”ç”¨ï¼ŒåŒ…æ‹¬ Gemma 3n æ¨¡å‹çš„éƒ¨ç½²ã€‚

## ğŸ“‹ ç›®å½•

- [å‰ç½®å‡†å¤‡](#å‰ç½®å‡†å¤‡)
- [iOS æ¨¡æ‹Ÿå™¨è¿è¡Œæµç¨‹](#ios-æ¨¡æ‹Ÿå™¨è¿è¡Œæµç¨‹)
- [Android æ¨¡æ‹Ÿå™¨è¿è¡Œæµç¨‹](#android-æ¨¡æ‹Ÿå™¨è¿è¡Œæµç¨‹)
- [å¸¸è§é—®é¢˜è§£å†³](#å¸¸è§é—®é¢˜è§£å†³)
- [åŠŸèƒ½æµ‹è¯•æŒ‡å—](#åŠŸèƒ½æµ‹è¯•æŒ‡å—)

## å‰ç½®å‡†å¤‡

### 1. ç¯å¢ƒè¦æ±‚

- **macOS**ï¼ˆiOS å¼€å‘å¿…éœ€ï¼‰
- **Node.js** 18+ å’Œ npm/yarn
- **Xcode** 14+ï¼ˆiOSï¼‰
- **Android Studio**ï¼ˆAndroidï¼‰
- **Expo CLI**ï¼š`npm install -g expo-cli`

### 2. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone [é¡¹ç›®åœ°å€]
cd gemma-3n

# å®‰è£…ä¾èµ–
npm install

# iOS ç‰¹å®šä¾èµ–
cd ios
pod install
cd ..
```

### 3. å‡†å¤‡æ¨¡å‹æ–‡ä»¶

```bash
# åˆ›å»ºæ¨¡å‹ç›®å½•
mkdir -p ./assets/models

# ä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼ˆé€‰æ‹©å…¶ä¸€ï¼‰ï¼š
# - Gemma 3n Q4_K_M é‡åŒ–ç‰ˆï¼ˆçº¦ 3GBï¼‰
# - TinyLlama GGUFï¼ˆæµ‹è¯•ç”¨ï¼Œçº¦ 600MBï¼‰

# å°†æ¨¡å‹æ–‡ä»¶æ”¾å…¥ assets/models ç›®å½•
# é‡å‘½åä¸ºï¼šgemma-3n-Q4_K_M.gguf
```

âš ï¸ **é‡è¦**ï¼šç”±äº Node.js çš„ 2GB æ–‡ä»¶é™åˆ¶ï¼Œæ¨¡å‹æ–‡ä»¶å¿…é¡»é€šè¿‡åŸç”Ÿå·¥å…·éƒ¨ç½²ï¼Œä¸èƒ½é€šè¿‡ Metro bundlerã€‚

## iOS æ¨¡æ‹Ÿå™¨è¿è¡Œæµç¨‹

### æ–¹æ³• 1ï¼šä½¿ç”¨ Xcodeï¼ˆæ¨èé¦–æ¬¡è¿è¡Œï¼‰

#### æ­¥éª¤ 1ï¼šæ‰“å¼€é¡¹ç›®
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
open ios/VoiceAssistant.xcworkspace
```
âš ï¸ æ³¨æ„ï¼šæ˜¯ `.xcworkspace` è€Œä¸æ˜¯ `.xcodeproj`

#### æ­¥éª¤ 2ï¼šé…ç½®å’Œè¿è¡Œ
1. åœ¨ Xcode é¡¶éƒ¨é€‰æ‹©æ¨¡æ‹Ÿå™¨ï¼ˆæ¨è iPhone 14 æˆ– 15ï¼‰
2. ç‚¹å‡»è¿è¡ŒæŒ‰é’®ï¼ˆâ–¶ï¸ï¼‰æˆ–æŒ‰ `Cmd + R`
3. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆé¦–æ¬¡çº¦ 3-5 åˆ†é’Ÿï¼‰

#### æ­¥éª¤ 3ï¼šéƒ¨ç½²æ¨¡å‹
```bash
# åº”ç”¨å®‰è£…åï¼Œåœ¨æ–°ç»ˆç«¯çª—å£è¿è¡Œ
./scripts/deploy-model.sh

# é€‰æ‹©é€‰é¡¹ 1ï¼ˆiOS æ¨¡æ‹Ÿå™¨ï¼‰
# è„šæœ¬ä¼šè‡ªåŠ¨æ‰¾åˆ°è¿è¡Œä¸­çš„æ¨¡æ‹Ÿå™¨å¹¶éƒ¨ç½²æ¨¡å‹
```

#### æ­¥éª¤ 4ï¼šå¯åŠ¨ Metro
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npx expo start --dev-client
```

#### æ­¥éª¤ 5ï¼šè¿æ¥åº”ç”¨
1. åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€ Voice Assistant åº”ç”¨
2. ç‚¹å‡» `http://localhost:8081`
3. ç­‰å¾… JavaScript bundle åŠ è½½

### æ–¹æ³• 2ï¼šä½¿ç”¨ Expo CLI

#### æ­¥éª¤ 1ï¼šæ„å»ºå’Œè¿è¡Œ
```bash
# æ¸…ç†å¹¶æ„å»º
npx expo run:ios --device

# æˆ–ç›´æ¥è¿è¡Œï¼ˆå¦‚æœä¹‹å‰å·²æ„å»ºï¼‰
npx expo run:ios
```

#### æ­¥éª¤ 2ï¼šéƒ¨ç½²æ¨¡å‹
åŒæ–¹æ³• 1 çš„æ­¥éª¤ 3

#### æ­¥éª¤ 3ï¼šåç»­è¿è¡Œ
```bash
# ä¹‹åå¯ä»¥ç›´æ¥ä½¿ç”¨
npx expo start --dev-client
```

## Android æ¨¡æ‹Ÿå™¨è¿è¡Œæµç¨‹

### å‰ç½®è®¾ç½®

#### 1. å¯åŠ¨ Android æ¨¡æ‹Ÿå™¨
- æ‰“å¼€ Android Studio
- Tools â†’ AVD Manager
- åˆ›å»ºæˆ–å¯åŠ¨ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼ˆæ¨è Pixel 5 API 33ï¼‰

#### 2. ç¡®è®¤ ADB è¿æ¥
```bash
# æ£€æŸ¥è®¾å¤‡è¿æ¥
adb devices
# åº”è¯¥æ˜¾ç¤ºï¼šemulator-5554 device
```

### è¿è¡Œæ­¥éª¤

#### æ­¥éª¤ 1ï¼šæ„å»ºå’Œå®‰è£…
```bash
# é¦–æ¬¡è¿è¡Œ
npx expo run:android

# æˆ–ä½¿ç”¨ Android Studio
# æ‰“å¼€ android ç›®å½•ä½œä¸ºé¡¹ç›®
# ç‚¹å‡»è¿è¡ŒæŒ‰é’®
```

#### æ­¥éª¤ 2ï¼šéƒ¨ç½²æ¨¡å‹
```bash
# è¿è¡Œéƒ¨ç½²è„šæœ¬
./scripts/deploy-model.sh

# é€‰æ‹©é€‰é¡¹ 2ï¼ˆAndroid æ¨¡æ‹Ÿå™¨ï¼‰
# ç­‰å¾…ä¸Šä¼ å®Œæˆï¼ˆ3GB çº¦éœ€ 2-5 åˆ†é’Ÿï¼‰
```

#### æ­¥éª¤ 3ï¼šå¯åŠ¨åº”ç”¨
```bash
# å¯åŠ¨ Metro
npx expo start --dev-client
```

#### æ­¥éª¤ 4ï¼šè¿æ¥åº”ç”¨
1. åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€ Voice Assistant
2. ç‚¹å‡» `http://10.0.2.2:8081`ï¼ˆAndroid æ¨¡æ‹Ÿå™¨ä¸“ç”¨åœ°å€ï¼‰
3. æˆ–ä½¿ç”¨æœ¬æœº IPï¼š`http://[ä½ çš„IP]:8081`

## å¸¸è§é—®é¢˜è§£å†³

### iOS é—®é¢˜

#### 1. Pod å®‰è£…å¤±è´¥
```bash
cd ios
rm -rf Pods Podfile.lock
pod install --repo-update
```

#### 2. ç­¾åé”™è¯¯
- Xcode â†’ VoiceAssistant â†’ Signing & Capabilities
- Team é€‰æ‹© "Personal Team"

#### 3. æ¶æ„é”™è¯¯
- Build Settings â†’ Architectures â†’ ç¡®ä¿åŒ…å« arm64

### Android é—®é¢˜

#### 1. Metro è¿æ¥å¤±è´¥
```bash
# åå‘ä»£ç†ç«¯å£
adb reverse tcp:8081 tcp:8081
```

#### 2. æ„å»ºå¤±è´¥
```bash
cd android
./gradlew clean
cd ..
npx expo run:android --clear
```

### æ¨¡å‹éƒ¨ç½²é—®é¢˜

#### 1. æ¨¡å‹æœªæ‰¾åˆ°
æ£€æŸ¥éƒ¨ç½²è·¯å¾„ï¼š
```bash
# iOS
xcrun simctl get_app_container booted com.voiceassistant.app data

# Android
adb shell ls /sdcard/Android/data/com.voiceassistant.app/files/Documents/
```

#### 2. æ‰‹åŠ¨éƒ¨ç½²æ¨¡å‹
```bash
# iOS
cp ./assets/models/*.gguf "[APP_CONTAINER]/Documents/"

# Android
adb push ./assets/models/*.gguf /sdcard/Android/data/com.voiceassistant.app/files/Documents/
```

## åŠŸèƒ½æµ‹è¯•æŒ‡å—

### 1. åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### RAG ç³»ç»Ÿæµ‹è¯•ï¼ˆçŸ¥è¯†åº“ï¼‰
```
è¾“å…¥ï¼šEarthquake!
é¢„æœŸï¼šç´§æ€¥ DROP, COVER, HOLD ON æŒ‡ä»¤

è¾“å…¥ï¼šI'm trapped
é¢„æœŸï¼šä¿æŒå†·é™ã€æ•²å‡»ç®¡é“ç­‰å»ºè®®

è¾“å…¥ï¼šHow to find water?
é¢„æœŸï¼šæ°´æºæŸ¥æ‰¾æ–¹æ³•
```

#### Gemma æ¨¡å‹æµ‹è¯•ï¼ˆé€šç”¨å¯¹è¯ï¼‰
```
è¾“å…¥ï¼šWhat's the weather?
é¢„æœŸï¼šæ¨¡å‹ç”Ÿæˆçš„å›å¤ï¼ˆéçŸ¥è¯†åº“ï¼‰

è¾“å…¥ï¼šTell me a story
é¢„æœŸï¼šåˆ›é€ æ€§å†…å®¹ç”Ÿæˆ
```

### 2. è¯­éŸ³åŠŸèƒ½æµ‹è¯•
- é•¿æŒ‰éº¦å…‹é£æŒ‰é’®
- è¯´å‡ºæµ‹è¯•çŸ­è¯­
- æ¾å¼€æŸ¥çœ‹è¯†åˆ«ç»“æœ

### 3. æ€§èƒ½éªŒè¯
- [ ] æ¨¡å‹åŠ è½½æ—¶é—´ < 5 ç§’
- [ ] å“åº”æ—¶é—´ < 2 ç§’
- [ ] å†…å­˜ä½¿ç”¨ç¨³å®š
- [ ] è¿ç»­å¯¹è¯æ— å´©æºƒ

## ğŸ¯ å¿«é€Ÿæ£€æŸ¥æ¸…å•

### iOS è¿è¡Œæ£€æŸ¥
- [ ] Xcode å·²å®‰è£…
- [ ] iOS æ¨¡æ‹Ÿå™¨å·²å¯åŠ¨
- [ ] åº”ç”¨æˆåŠŸæ„å»ºå®‰è£…
- [ ] æ¨¡å‹æ–‡ä»¶å·²éƒ¨ç½²
- [ ] Metro æœåŠ¡å™¨è¿è¡Œä¸­
- [ ] åº”ç”¨å¯æ­£å¸¸å¯¹è¯

### Android è¿è¡Œæ£€æŸ¥
- [ ] Android Studio å·²å®‰è£…
- [ ] Android æ¨¡æ‹Ÿå™¨å·²å¯åŠ¨
- [ ] ADB è¿æ¥æ­£å¸¸
- [ ] åº”ç”¨æˆåŠŸæ„å»ºå®‰è£…
- [ ] æ¨¡å‹æ–‡ä»¶å·²éƒ¨ç½²
- [ ] Metro æœåŠ¡å™¨è¿è¡Œä¸­
- [ ] åº”ç”¨å¯æ­£å¸¸å¯¹è¯

## ğŸ“ æç¤ºä¸æŠ€å·§

1. **å¼€å‘æ•ˆç‡**
   - ä½¿ç”¨ Xcode/Android Studio é¦–æ¬¡æ„å»º
   - åç»­ä½¿ç”¨ `npx expo start --dev-client`
   - ä¿æŒæ¨¡æ‹Ÿå™¨å¼€å¯ï¼Œé¿å…é‡å¤éƒ¨ç½²æ¨¡å‹

2. **è°ƒè¯•æŠ€å·§**
   - iOS: Xcode æ§åˆ¶å°æŸ¥çœ‹æ—¥å¿—
   - Android: `adb logcat | grep -i llama`
   - Metro: æŸ¥çœ‹ç»ˆç«¯è¾“å‡º

3. **æ¨¡å‹ç®¡ç†**
   - ä½¿ç”¨éƒ¨ç½²è„šæœ¬çš„æ¸…ç†åŠŸèƒ½ç®¡ç†ç©ºé—´
   - æµ‹è¯•å¯å…ˆç”¨å°æ¨¡å‹ï¼ˆTinyLlamaï¼‰
   - ç”Ÿäº§ç¯å¢ƒå†æ¢å¤§æ¨¡å‹ï¼ˆGemma 3nï¼‰

---

å¦‚é‡åˆ°æœªåˆ—å‡ºçš„é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- [æ¨¡å‹éƒ¨ç½²æ–‡æ¡£](./MODEL_DEPLOYMENT.md)
- [é¡¹ç›® README](./README.md)
- æäº¤ Issue åˆ°é¡¹ç›®ä»“åº“